LV4 ~ LV5
LV2 ~ LV1
## latent variables
LV1 =~ x1  + x2  + x3
LV2 =~ x4  + x5  + x6
LV3 =~ x7  + x8  + x9
LV4 =~ x10 + x11 + x12
LV5 =~ x13 + x14 + x15
LV6 =~ x16 + x17 + x18
"
simM2 <-
"
## regressions
LV4 ~ LV1
LV5 ~ LV6
LV1 ~ LV6
LV4 ~ LV3
LV3 ~ LV2
LV4 ~ LV5
LV2 ~ LV1
## latent variables
LV1 =~ x1  + x2  + x3
LV2 =~ x4  + x5  + x6
LV3 =~ x7  + x8  + x9
LV4 =~ x10 + x11 + x12
LV5 =~ x13 + x14 + x15
LV6 =~ x16 + x17 + x18
"
simM3 <-
"
## regressions
LV4 ~ LV1
LV5 ~ LV6
LV4 ~ LV3
LV3 ~ LV2
LV4 ~ LV5
LV6 ~ LV1
LV2 ~ LV1
## latent variables
LV1 =~ x1  + x2  + x3
LV2 =~ x4  + x5  + x6
LV3 =~ x7  + x8  + x9
LV4 =~ x10 + x11 + x12
LV5 =~ x13 + x14 + x15
LV6 =~ x16 + x17 + x18
"
simM4 <-
"
## regressions
LV4 ~ LV1
LV5 ~ LV6
LV4 ~ LV3
LV3 ~ LV2
LV1 ~ LV2
LV4 ~ LV5
LV6 ~ LV1
## latent variables
LV1 =~ x1  + x2  + x3
LV2 =~ x4  + x5  + x6
LV3 =~ x7  + x8  + x9
LV4 =~ x10 + x11 + x12
LV5 =~ x13 + x14 + x15
LV6 =~ x16 + x17 + x18
"
simM5 <-
"
## regressions
LV4 ~ LV1
LV5 ~ LV6
LV2 ~ LV3
LV4 ~ LV3
LV1 ~ LV2
LV4 ~ LV5
LV6 ~ LV1
## latent variables
LV1 =~ x1  + x2  + x3
LV2 =~ x4  + x5  + x6
LV3 =~ x7  + x8  + x9
LV4 =~ x10 + x11 + x12
LV5 =~ x13 + x14 + x15
LV6 =~ x16 + x17 + x18
"
simM1_fit <- sem(simM1, data=simData, fixed.x = FALSE)
simM2_fit <- sem(simM2, data=simData, fixed.x = FALSE)
simM3_fit <- sem(simM3, data=simData, fixed.x = FALSE)
simM4_fit <- sem(simM4, data=simData, fixed.x = FALSE)
simM5_fit <- sem(simM5, data=simData, fixed.x = FALSE)
## summary(M1_fit)
## Converting LAV to DAG, then to a MEC list
## DAG <- lavaanToGraph(LAV)
## MEC <- equivalentDAGs(DAG)
## Quick dagitty check (need LV free model)
simM1_compo <-
"
## regressions
C4 ~ C1
C1 ~ C6
C4 ~ C3
C3 ~ C2
C6 ~ C5
C4 ~ C5
C2 ~ C1
"
DAG <- lavaanToGraph(simM1_compo)
plot(DAG)
equivalentDAGs(DAG)
## Functionality with LVs
mvpt(lavaan_model = M1, path = "PA ~ SE", data = burnout, showplots = TRUE) ## ERROR
## Functionality with LVs
mvpt(lavaan_model = simM1, path = "LV4 ~ LV1", data = simData, showplots = TRUE) ## ERROR
## Non-functionality with input formatting errors
mvpt(lavaan_model = simM1, path = "a", data = simData, showplots = TRUE)
## Non-functionality with input formatting errors
err_model_format <-
"
C4 ~ C1
C5 ~ C6
C4 ~ C3
C3 ~ C2
C1 ~ C2
C4 ~ C5
C6 ~ C1
"
## Non-functionality due to input formatting errors
err_model_format <-
"
C4 ~ C1
C5 ~ C6
C4 ~ C3
C3 ~ C2
C1 ~ C2
C4 ~ C5
C6 ~ C1
"
mvpt(lavaan_model = err_model_format, path = "a", data = simData, showplots = TRUE)
mvpt(lavaan_model = err_model_format, path = "C4~C1", data = simData, showplots = TRUE)
## Non-functionality due to input formatting errors
err_model_format <-
"
C4 ~ a*C1
C5 ~ C6
C4 ~ C3
C3 ~ C2
C1 ~ C2
C4 ~ C5
C6 ~ C1
"
mvpt(lavaan_model = err_model_format, path = "C4~C1", data = simData, showplots = TRUE)
err_model_format2 <-
"
C4 ~~ C1
C5 ~ C6
C4 ~ C3
C3 ~ C2
C1 ~ C2
C4 ~ C5
C6 ~ C1
"
mvpt(lavaan_model = err_model_format1, path = "C4~C1", data = simData, showplots = TRUE)
err_model_format1 <-
"
C4 ~ a*C1
C5 ~ C6
C4 ~ C3
C3 ~ C2
C1 ~ C2
C4 ~ C5
C6 ~ C1
"
err_model_format2 <-
"
C4 ~~ C1
C5 ~ C6
C4 ~ C3
C3 ~ C2
C1 ~ C2
C4 ~ C5
C6 ~ C1
"
mvpt(lavaan_model = err_model_format1, path = "C4~C1", data = simData, showplots = TRUE)
mvpt(lavaan_model = err_model_format2, path = "C4~C1", data = simData, showplots = TRUE)
err_model_format3 <-
"
C4~C1
C5 ~ C6
C4 ~ C3
C3 ~ C2
C1 ~ C2
C4 ~ C5
C6 ~ C1
"
err_model_format3 <-
"
C4~C1
C5 ~ C6
C4 ~ C3
C3 ~ C2
C1 ~ C2
C4 ~ C5
C6 ~ C1
"
mvpt(lavaan_model = err_model_format3, path = "C4~C1", data = simData, showplots = TRUE)
err_model_format3 <-
"
C4+C1
C5 ~ C6
C4 ~ C3
C3 ~ C2
C1 ~ C2
C4 ~ C5
C6 ~ C1
"
mvpt(lavaan_model = err_model_format3, path = "C4~C1", data = simData, showplots = TRUE)
## Non-functionality due to label usage
err_model_format <-
"
C4 ~ a*C1
C5 ~ C6
C4 ~ C3
C3 ~ C2
C1 ~ C2
C4 ~ C5
C6 ~ C1
"
mvpt(lavaan_model = err_model_format, path = "C4~C1", data = simData, showplots = TRUE)
## Non-functionality due non lavaan formatting
err_model_format <-
"
C4 + C1
C5 ~ C6
C4 ~ C3
C3 ~ C2
C1 ~ C2
C4 ~ C5
C6 ~ C1
"
mvpt(lavaan_model = err_model_format, path = "C4~C1", data = simData, showplots = TRUE)
## Non-functionality message due to covariance specification (update pending)
err_model_format <-
"
C4 ~~ C1
C5 ~ C6
C4 ~ C3
C3 ~ C2
C1 ~ C2
C4 ~ C5
C6 ~ C1
"
mvpt(lavaan_model = err_model_format, path = "C4~C1", data = simData, showplots = TRUE)
mvpt(lavaan_model = err_model_format, path = " C4~C1", data = simData, showplots = TRUE)
## Functionality with LVs
mvpt(lavaan_model = simM1, path = " LV4 ~ LV1", data = simData, showplots = TRUE)
## Functionality without LVs
corr_model_format <-
"
C4 ~ C1
C5 ~ C6
C4 ~ C3
C3 ~ C2
C1 ~ C2
C4 ~ C5
C6 ~ C1
"
mvpt(lavaan_model = corr_model_format, path = "C4 ~ C1", data = simData, showplots = TRUE)
LAV <- simM1
path <- "LV4 ~ LV1"
dagu(LAV, path)
mvpt:::dagu(LAV, path)
subMEC_lavaan_ready <- mvpt:::dagu(LAV, path)$subMEC_lavaan_ready
auto_sem(subMEC_lavaan_ready, data)
mvpt:::auto_sem(subMEC_lavaan_ready, data)
data <- simData
mvpt:::auto_sem(subMEC_lavaan_ready, data)
SEMfitted <- simM1_fit
sc1 <- mvpt:::calc_sc(simM1_fit)
simM1_fit <- sem(simM1, data=simData, fixed.x = FALSE, missing = "ml")
simM2_fit <- sem(simM2, data=simData, fixed.x = FALSE, missing = "ml")
simM3_fit <- sem(simM3, data=simData, fixed.x = FALSE, missing = "ml")
simM4_fit <- sem(simM4, data=simData, fixed.x = FALSE, missing = "ml")
simM5_fit <- sem(simM5, data=simData, fixed.x = FALSE, missing = "ml")
SEMfitted <- simM1_fit
sc1 <- mvpt:::calc_sc(simM1_fit)
sc2 <- mvpt:::calc_sc(simM2_fit)
n <- nobs(M1_fit)
n <- nobs(simM1_fit)
SEMfitted <- simM1_fit
sc1 <- mvpt:::calc_sc(simM1_fit)
sc2 <- mvpt:::calc_sc(simM2_fit)
SEMfitted <- simM1_fit
sc1 <- mvpt:::calc_sc(SEMfitted)
sc2 <- mvpt:::calc_sc(SEMfitted)
n <- nobs(SEMfitted)
mvpt:::calc_A(SEMfitted)
mvpt:::calc_sc(SEMfitted)
mvpt:::calc_B(sc1, sc2, n)
SEMfitted_list <- list(simM1_fit, simM2_fit, simM3_fit, simM4_fit, simM5_fit)
path <- "LV4~LV1"
VW_core(SEMfitted_list, path)
mvpt:::VW_core(SEMfitted_list, path)
roxygen2::roxygenise("C:/Git/mvpt")
## Run roxy, CRAN check, and tinytest (possible Windows-only note pops up)
## setwd("C:/Git/mvpt")
## roxygen2::roxygenise("C:/Git/mvpt")
## devtools::check("C:/Git/mvpt", cran = TRUE)
file.exists("inst/tinytest/tests.mvpt.R")
tinytest::run_test_dir("C:/Git/mvpt/inst/tinytest")
roxygen2::roxygenise("C:/Git/mvpt")
## Run roxy, CRAN check, and tinytest (possible Windows-only note pops up)
## setwd("C:/Git/mvpt")
## roxygen2::roxygenise("C:/Git/mvpt")
## devtools::check("C:/Git/mvpt", cran = TRUE)
tinytest::run_test_dir("C:/Git/mvpt/inst/tinytest")
## Run roxy, CRAN check, and tinytest (possible Windows-only note pops up)
## setwd("C:/Git/mvpt")
## roxygen2::roxygenise("C:/Git/mvpt")
## devtools::check("C:/Git/mvpt", cran = TRUE)
tinytest::run_test_dir("C:/Git/mvpt/inst/tinytest")
## Run roxy, CRAN check, and tinytest (possible Windows-only note pops up)
## setwd("C:/Git/mvpt")
## roxygen2::roxygenise("C:/Git/mvpt")
## devtools::check("C:/Git/mvpt", cran = TRUE)
tinytest::run_test_dir("C:/Git/mvpt/inst/tinytest")
graphics.off()
## Run roxy, CRAN check, and tinytest (possible Windows-only note pops up)
## setwd("C:/Git/mvpt")
## roxygen2::roxygenise("C:/Git/mvpt")
## devtools::check("C:/Git/mvpt", cran = TRUE)
tinytest::run_test_dir("C:/Git/mvpt/inst/tinytest")
tinytest::run_test_dir("C:/Git/mvpt/inst/tinytest")
pkgload::load_all(export_all = FALSE) ## warning expected
tinytest::run_test_dir("C:/Git/mvpt/inst/tinytest")
devtools::check("C:/Git/mvpt", cran = TRUE)
devtools::check("C:/Git/mvpt", cran = TRUE)
pkgload::load_all(export_all = FALSE) ## warning expected
tinytest::run_test_dir("C:/Git/mvpt/inst/tinytest")
detach(lavaan)
detach("package:lavaan")
library(lavaan, quietly = TRUE)
detach("package:lavaan")
library(lavaan)
detach("package:lavaan")
detach("package:lavaan")
library(lavaan, quietly = TRUE)
library(lavaan)
detach("package:lavaan")
library(lavaan)
library(dagitty)
detach("package:dagitty")
library(dagitty)
detach("package:dagitty")
library(dagitty, quietly = TRUE)
?mvpt
?blavaan
library(blavaan)
?blavaan
?mvpt-package
help(package = "mvpt")
package?mvpt
?"package-mvpt"
?"mvpt-package"
roxygen2::roxygenise("C:/Git/mvpt")
pkgload::load_all(export_all = FALSE) ## warning expected
?mvpt
?"package-mvpt"
?"mvpt-package"
roxygen2::roxygenise("C:/Git/mvpt")
pkgload::load_all(export_all = FALSE) ## warning expected
?"mvpt-package"
?"mvpt-blavaan"
library(blavaan)
library(lavaan)
?"mvpt-lavaan"
?"blavaan-package"
?"lavaan-package"
?"mvpt-package"
expect_error(auto_sem(subMEC_lavaan_ready, data, missing = "listwise"))
library(tinytest)
library(lavaan)
library(dagitty)
## DATA: Simulated workburnout dataset (no regression yet)
set.seed(12345)
data_generating_model <-
"
## latent variables
LV1 =~ 0.5*x1  + 0.7*x2  + 0.9*x3
LV2 =~ 0.5*x4  + 0.7*x5  + 0.9*x6
LV3 =~ 0.5*x7  + 0.7*x8  + 0.9*x9
LV4 =~ 0.5*x10 + 0.7*x11 + 0.9*x12
LV5 =~ 0.5*x13 + 0.7*x14 + 0.9*x15
LV6 =~ 0.5*x16 + 0.7*x17 + 0.9*x18
## regressions (none)
"
simData <- simulateData(model = data_generating_model,  sample.nobs = 599)
## Adding one NA to this complete dataset
simData[10, 10] <- NA
## Adding composite measures
simData$C1 <- (simData$x1  + simData$x2  + simData$x3)  / 3
simData$C2 <- (simData$x4  + simData$x5  + simData$x6)  / 3
simData$C3 <- (simData$x7  + simData$x8  + simData$x9)  / 3
simData$C4 <- (simData$x10 + simData$x11 + simData$x12) / 3
simData$C5 <- (simData$x13 + simData$x14 + simData$x15) / 3
simData$C6 <- (simData$x16 + simData$x17 + simData$x18) / 3
## Five LV models (all members of same MEC)
simM1 <-
"
## regressions
LV4 ~ LV1
LV1 ~ LV6
LV4 ~ LV3
LV3 ~ LV2
LV6 ~ LV5
LV4 ~ LV5
LV2 ~ LV1
## latent variables
LV1 =~ x1  + x2  + x3
LV2 =~ x4  + x5  + x6
LV3 =~ x7  + x8  + x9
LV4 =~ x10 + x11 + x12
LV5 =~ x13 + x14 + x15
LV6 =~ x16 + x17 + x18
"
simM2 <-
"
## regressions
LV4 ~ LV1
LV5 ~ LV6
LV1 ~ LV6
LV4 ~ LV3
LV3 ~ LV2
LV4 ~ LV5
LV2 ~ LV1
## latent variables
LV1 =~ x1  + x2  + x3
LV2 =~ x4  + x5  + x6
LV3 =~ x7  + x8  + x9
LV4 =~ x10 + x11 + x12
LV5 =~ x13 + x14 + x15
LV6 =~ x16 + x17 + x18
"
simM3 <-
"
## regressions
LV4 ~ LV1
LV5 ~ LV6
LV4 ~ LV3
LV3 ~ LV2
LV4 ~ LV5
LV6 ~ LV1
LV2 ~ LV1
## latent variables
LV1 =~ x1  + x2  + x3
LV2 =~ x4  + x5  + x6
LV3 =~ x7  + x8  + x9
LV4 =~ x10 + x11 + x12
LV5 =~ x13 + x14 + x15
LV6 =~ x16 + x17 + x18
"
simM4 <-
"
## regressions
LV4 ~ LV1
LV5 ~ LV6
LV4 ~ LV3
LV3 ~ LV2
LV1 ~ LV2
LV4 ~ LV5
LV6 ~ LV1
## latent variables
LV1 =~ x1  + x2  + x3
LV2 =~ x4  + x5  + x6
LV3 =~ x7  + x8  + x9
LV4 =~ x10 + x11 + x12
LV5 =~ x13 + x14 + x15
LV6 =~ x16 + x17 + x18
"
simM5 <-
"
## regressions
LV4 ~ LV1
LV5 ~ LV6
LV2 ~ LV3
LV4 ~ LV3
LV1 ~ LV2
LV4 ~ LV5
LV6 ~ LV1
## latent variables
LV1 =~ x1  + x2  + x3
LV2 =~ x4  + x5  + x6
LV3 =~ x7  + x8  + x9
LV4 =~ x10 + x11 + x12
LV5 =~ x13 + x14 + x15
LV6 =~ x16 + x17 + x18
"
simM1_fit <- sem(simM1, data=simData, fixed.x = FALSE, missing = "ml")
simM2_fit <- sem(simM2, data=simData, fixed.x = FALSE, missing = "ml")
simM3_fit <- sem(simM3, data=simData, fixed.x = FALSE, missing = "ml")
simM4_fit <- sem(simM4, data=simData, fixed.x = FALSE, missing = "ml")
simM5_fit <- sem(simM5, data=simData, fixed.x = FALSE, missing = "ml")
LAV <- simM1
path <- "LV4 ~ LV1"
data <- simData
subMEC_lavaan_ready <- mvpt:::dagu(LAV, path)$subMEC_lavaan_ready
mvpt:::auto_sem(subMEC_lavaan_ready, data)
expect_error(auto_sem(subMEC_lavaan_ready, data, missing = "listwise"))
?sem()
## Non-functionality if default estimator argument is changed
expect_error(auto_sem(subMEC_lavaan_ready, data, estimator = "WLS"))
roxygen2::roxygenise("C:/Git/mvpt")
pkgload::load_all(export_all = FALSE) ## warning expected
tinytest::run_test_dir("C:/Git/mvpt/inst/tinytest")
roxygen2::roxygenise("C:/Git/mvpt")
pkgload::load_all(export_all = FALSE) ## warning expected
